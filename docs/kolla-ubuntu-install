Kolla Ansible

vim /etc/sudoers
	ubuntu	ALL=(ALL:ALL)	NOPASSWD:ALL

sudo apt update
sudo apt upgrade -y
sudo apt install git python3-dev libffi-dev gcc libssl-dev libdbus-glib-1-dev python3-venv -y
python3 -m venv kolla
source kolla/bin/activate
pip install -U pip
pip install docker pkgconfig dbus-python
pip install git+https://opendev.org/openstack/kolla-ansible@master
sudo mkdir -p /etc/kolla
sudo chown $USER:$USER /etc/kolla/
cp -r kolla/share/kolla-ansible/etc_examples/kolla/* /etc/kolla/
ls kolla/share/kolla-ansible/ansible/inventory/
cp kolla/share/kolla-ansible/ansible/inventory/all-in-one .
kolla-ansible install-deps
kolla-genpwd
sudo vim /etc/kolla/globals.yml
sudo cat /etc/kolla/globals.yml | grep -v ^# | grep -v ^$
kolla-ansible bootstrap-servers -i all-in-one
kolla-ansible prechecks -i all-in-one
kolla-ansible deploy -i all-in-one
pip install python-openstackclient -c https://releases.openstack.org/constraints/upper/master
kolla-ansible post-deploy -i all-in-one
mkdir .config/openstack -p
cp /etc/kolla/clouds.yaml .config/openstack/
vim .bashrc
	export OS_CLOUD=kolla-admin
	source ~/kolla/bin/activate
sudo usermod -aG docker $USER
openstack service list
openstack compute service list
openstack network agent list
docker ps
grep keystone_admin_password /etc/kolla/passwords.yml
cp kolla/share/kolla-ansible/init-runonce .
vim init-runonce
	EXT_NET_CIDR=${EXT_NET_CIDR:-'192.168.1.0/24'}
	EXT_NET_RANGE=${EXT_NET_RANGE:-'start=192.168.2.51,end=192.168.2.250'}
	EXT_NET_GATEWAY=${EXT_NET_GATEWAY:-'192.168.1.1'}

./init-runonce
openstack --os-cloud=kolla-admin server create \
    --image cirros \
    --flavor m1.tiny \
    --key-name mykey \
    --network demo-net \
    demo1

openstack server list
openstack network list --external
openstack floating ip create public1
openstack server add floating ip demo1 192.168.1.126
openstack server show demo1 -c addresses
ssh cirros@192.168.1.126

